<header>
  <span>Register a Creditor Group</span>
</header>

<section class="underline">
  <div class="pull-left ">
    <input type="search" ng-model="flags.search" placeholder="Filter Creditor Groups" class="form-kapok" size="25">
  </div>
  <div class="pull-right">
    <a href="#/creditors" class="btn btn-default btn-sm">Register a Supplier</a>
  </div>
</section>

<div class="content">
  <div class="row">

    <div class="col-xs-4">
      <div class="panel panel-default" style="max-height: 300px;">
        <div class="panel-heading">
          <span>Creditor Groups</span>
        </div>
        <table class="table table-striped table-condensed">
          <thead>
            <tr><th>Group Name</th><th>Account Number</th><th><i class="glyphicon glyphicon-lock"></i></th></tr>
          </thead>
          <tbody>
            <tr ng-repeat="group in models.creditor_group | filter:flags.search"  ng-click="editGroup(group)">
              <td>{{group.name}}</td><td>{{formatGroupAccount(group.account_id)}}</td><td><input type="checkbox" ng-model="group.locked" ng-true-value="1" ng-false-value="0" ng-change="lock(group)"></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="col-xs-6">
      <form role="form" class="form-horizontal" name="addGroup" novalidate>

        <fieldset>
          <legend>
            Creditor Group Details
          </legend>

          <div class="form-group">
            <label class="col-xs-2 control-label">Group Name:</label>
            <div class="col-xs-10">
              <input 
                class="form-kapok"
                placeholder="e.g. CMK Medical Aid"
                type="text"
                ng-model="newgroup.name"
                required
                >
            </div>
          </div> 

          <div class="form-group">
            <label class="col-xs-2 control-label">Account Number:</label>
             <div class="col-xs-10">
              <select
                class="form-kapok"
                ng-model="newgroup.account_id"
                ng-options="account.id as formatAccount(account) for account in models.account"
                required
              >
                <option value="" disabled="disabled">--- Select An Account ---</option>
              </select>
            </div>
          </div>
          <div class="pull-right">
            <button class="btn btn-success btn-sm" ng-click="save()">Save Changes</button>
            <button class="btn btn-default btn-sm" ng-click="newGroup()">New Form</button>
          </div>
        </fieldset>
      </form>
    </div>
  </div>
</div>

<div ng-show="flags.success">
  <div class="alert alert-success">
    Successfully created <b>{{flags.name}}</b>.
  </div>
</div>
