<header>
  <span>Configure Exchange Rate</span>
</header>

<div class="content">
  <div class="row">
    <div class="col-xs-6">
      <table class="table table-bordered table-condensed">
        <thead>
          <tr><th>Date</th><th>Currency 1</th><th>Currency 2</th><th>Rate</th></tr>
        </thead>
        <tbody>
          <tr ng-repeat="exchange in models.exchange | limitTo: 12">
            <td>{{exchange.date | date}}</td><td>{{formatExchangeCurrency(exchange.enterprise_currency_id)}}</td><td>{{formatExchangeCurrency(exchange.foreign_currency_id)}}</td><td>{{exchange.rate | currency }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="col-xs-6" ng-switch="flags.current_exchange_rate" ng-cloak>
      <table class="table table-bordered table-condensed" ng-switch-when="true">
        <thead>
          <tr><th colspan="2">Today's ({{swap.current_exchange_rate.date | date}}) Exchange Rate:</th></tr>
          <tr><th>{{formatExchangeCurrency(swap.current_exchange_rate.enterprise_currency_id)}}</th><th>{{formatExchangeCurrency(swap.current_exchange_rate.foreign_currency_id)}}</th></tr>
        </thead>
        <tbody>
          <tr><td>1</td><td>{{swap.current_exchange_rate.rate}}</td></tr>
        </tbody>
      </table>
    
      <div class="panel panel-default" ng-switch-when="false">
        <div class="panel-body">
          <form name="kpk-exchange-form" class="form-horizontal">
            <fieldset>
              <legend>Exchange Rate</legend>
              <div class="form-group">
                <div class="col-xs-5">
                  <select 
                    class="form-kapok"
                    id="kpk-exchange-currency1"
                    name="kpk-exchange-currency1"
                    ng-model="swap.currency1"
                    ng-options="currency as formatCurrency(currency) for currency in models.currency"
                  >
                    <option value="" disabled="disabled">-- Select Currency --</option>
                  </select>
                </div>
                <label class="col-xs-1 control-label">
                  <i class="glyphicon glyphicon-arrow-right"></i>
                </label>
                <div class="col-xs-5">
                  <select 
                    class="form-kapok"
                    id="kpk-exchange-currency2"
                    name="kpk-exchange-currency2"
                    ng-model="swap.currency2"
                    ng-options="currency as formatCurrency(currency) for currency in models.currency | filter:filterOptions"
                  >
                    <option value="" disabled="disabled">-- Select Currency --</option>
                  </select>
                </div>
              </div>

              <div class="form-group">
                <div class="col-xs-5 input-group">
                  <input class="form-kapok" min="0" value="1">
                  <span class="input-group-addon">
                    {{swap.currency1.symbol}}
                  </span>
                </div>
                <label class="col-xs-1 control-label">
                  <i class="glyphicon glyphicon-arrow-right"></i>
                </label>
                <div class="col-xs-5 input-group">
                  <input class="form-kapok" ng-model="swap.rate" min="0" required placeholder="1.00">
                  <span class="input-group-addon">
                    {{swap.currency2.symbol}}
                  </span> 
                </div>
              </div>
            </fieldset>
            <input type="submit" form="exchange" class="btn btn-success btn-sm" ng-click="submit()" ng-disabled="valid()">
          </form>
        </div>
      </div>

      <div class="panel panel-default">
        <div class="panel-heading">
          <span>Calculator</span>
        </div>
          <table>
            <tbody>
              <tr>
                <th colspan="3"><div class="form-kapok" style="width: 100%">{{formatExpr(expr.elements)}}</div></th>
                <td><span class="btn btn-success" ng-click="clearCalc()">CE</span></td>
              </tr>
              <tr>
                <td><button type="button" class="btn btn-default" style="width:100%;" ng-click="pushCalc(7)">7</button></td>
                <td><button type="button" class="btn btn-default" style="width:100%;" ng-click="pushCalc(8)">8</button></td>
                <td><button type="button" class="btn btn-default" style="width:100%;" ng-click="pushCalc(9)">9</button></td>
                <td><button type="button" class="btn btn-default" style="width:100%;" ng-click="pushCalc('*')">X</button></td>
              </tr>
              <tr>
                <td><button type="button" class="btn btn-default" style="width:100%;" ng-click="pushCalc(4)">4</button></td>
                <td><button type="button" class="btn btn-default" style="width:100%;" ng-click="pushCalc(5)">5</button></td>
                <td><button type="button" class="btn btn-default" style="width:100%;" ng-click="pushCalc(6)">6</button></td>
                <td><button type="button" class="btn btn-default" style="width:100%;" ng-click="pushCalc('-')">-</button></td>
              </tr>
              <tr>
                <td><button type="button" class="btn btn-default" style="width:100%;" ng-click="pushCalc(1)">1</button></td>
                <td><button type="button" class="btn btn-default" style="width:100%;" ng-click="pushCalc(2)">2</button></td>
                <td><button type="button" class="btn btn-default" style="width:100%;" ng-click="pushCalc(3)">3</button></td>
                <td rowspan="2"><button class="btn btn-default" style="height:100%; width:100%; padding: 0;" ng-click="pushCalc('+')">+</button></td>
              </tr>
              <tr>
                <td><button type="button" class="btn btn-default" style="width:100%;" ng-click="pushCalc(0)">0</button></td>
                <td><button type="button" class="btn btn-default" style="width:100%;" ng-click="pushCalc('.')">.</button></td>
                <td><button type="button" class="btn btn-default" style="width:100%;" ng-click="calc()">=</button></td>
              </tr>
            </tbody>
          </table>
      </div>
    </div>
  </div>
</div>
