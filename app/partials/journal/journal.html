<header>
  <span class="capital">{{'POSTING_JOURNAL' | translate}}</span>
</header>

<section class="underline">
  <button ng-click="groupByID()" class="capital btn btn-default btn-sm"><span class="glyphicon glyphicon-sort-by-attributes"></span> {{'TRANSACTION' | translate}}</button>
  <button ng-click="groupByAccount()" class="capital btn btn-default btn-sm"><span class="glyphicon glyphicon-sort-by-attributes"></span> {{'ACCOUNT' | translate}}</button>
            
  <div class="pull-right">
    <a class="capital btn btn-default btn-sm" ng-click="trial()"><span class="glyphicon glyphicon-stats"></span> {{'TRIAL_BALANCE' | translate}} ({{rows.length || 0 }}) {{ 'ITEMS' | translate}}</a>
    <span class="dropdown">
      <a class="capital btn btn-default btn-sm dropdown-toggle"><span class="glyphicon glyphicon-cog"></span> {{'CONFIGURE' | translate}}</a>
      <ul class="dropdown-menu">
        <li class="dropdown-header">Toggle Columns</li>
        <li ng-repeat="column in columns">
          <a class="capital" ng-click="column.visible=!column.visible" href="">
            <i class="glyphicon" ng-class="{'glyphicon-unchecked' : !column.visible, 'glyphicon-check' : !!column.visible}"></i> {{column.name || column.id}}
          </a>
        </li>
      </ul>
    </span>
    <a class="capital btn btn-default btn-sm" ng-click="print()"><span class="glyphicon glyphicon-print"></span> {{'PRINT' | translate}}</a>
  </div>
</section>

<div class="content">
  <div class="row">
    <div class="col-xs-12">
      <div id="journal_grid" class="grid" style="height: 650px; overflow: hidden; outline: 0px; position: relative; font-size: 8pt"><!--Content populated with controller--></div>
    </div>
  </div>
</div>

<section class="bar-bottom">
  <div class="pull-right">
    <a href="#/reports/ledger/general_ledger" class="capital btn btn-default btn-sm"><span class="glyphicon glyphicon-floppy-open"></span>
      {{'GENERAL_LEDGER' | translate}}
    </a>
  </div>
</section>

<script type="text/ng-template" id="trialBalanceModal.html">
  <div class="modal-content">
    <div class="modal-header">
      <h3>Trial Balance <small>Status: {{data.status}} </small></h3> 
    </div>

    <div class="modal-body">

      <div ng-show="data.errors">
        <ul>
          <li ng-repeat="error in data.errors">{{error.err}} | {{error.reason}}</li>
        </ul>
      </div>

      <div ng-hide="data.errors">
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>General Ledger Balance</th><th>Total Debit</th><th>Total Credit</th><th>Balance</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th>Before Posting</th>
              <td>{{data.gl_balance.debit}}</td>
              <td>{{data.gl_balance.credit}}</td>
              <td>{{data.gl_balance.debit - data.gl_balance.credit}}</td>
            </tr>
            <tr>
              <th>After Posting</th>
              <td>{{data.gl_after_balance.debit}}</td>
              <td>{{data.gl_after_balance.credit}}</td>
              <td>{{data.gl_after_balance.debit - data.gl_after_balance.credit}}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="modal-footer">
        <button class="btn btn-primary" ng-disabled="data.errors" ng-click="ok()">Post to General Ledger</button>
        <button class="btn btn-default" ng-click="cancel()">Cancel</button>
    </div>
  </div>
</script>
