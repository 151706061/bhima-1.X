<link href="partials/reports/finance/finance_report.css" rel="stylesheet">

<h4>{{enterprise.name}}</h4>
<h4>Finance Report <small>{{timestamp | date}}</small></h4>
<section class="underline overline hidden-print">
  <div class="pull-right">
    <span class="dropdown">
      <a class="capital btn btn-default btn-sm dropdown-toggle"><span class="glyphicon glyphicon-cog"></span> {{'CONFIGURE' | translate}}</a>
      <ul class="dropdown-menu">
        <li class="dropdown-header">Report Years</li>
        <li ng-repeat="year in requiredYears">
          <a ng-click="toggleYear(year)" href="">
            <i class="glyphicon" ng-class="{'glyphicon-unchecked' : !year.toggle, 'glyphicon-check' : !!year.toggle}"></i> {{year.id}}
          </a>
        </li>
      </ul>
    </span> 
    <button ng-click="basicPrint()" class="btn btn-default btn-sm capital"><span class="glyphicon glyphicon-print"></span> {{'PRINT' | translate}}</button>
  </div>
</section>

<!--Uses ng-switch at the moment, team should discuss the best way to do this-->
<div ng-switch on="session_error.valid">
<section ng-switch-when="false" class="alert {{session_error.type}}"> <!--Type mapped in JS, not ideal but works for now-->
  <span>{{session_error.body}}</span>
</section>
</div>

<table class="reportTable">
  <thead>
    <tr>
      <th>Account</th>
      <th>Description</th>
      <th ng-repeat="column in columnDefinition">{{column.name}}</th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat="row in model['finance'].data">
      <td style="text-align: right">{{row.account_number}}</td>
      <td 
        ng-style="{'padding-left': row.depth * 30 + 'px'}" 
        ng-class="{'reportTitle': row.account_type_id==3}">{{row.account_txt}}</td>
       
      <td ng-repeat="column in columnDefinition"><span ng-hide="row.account_type_id==3">{{(row[column.key] || 0) | currency}}</span></td>
    </tr>
  </tbody>
</table>
