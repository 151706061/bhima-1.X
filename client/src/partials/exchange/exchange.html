<header>
  {{ "EXCHANGE.TITLE" | translate }}
</header>

<nav>
  <div class="pull-left">
    <ol class="breadcrumb">
      <li><a href="#/"><i class="glyphicon glyphicon-home"></i></a></li>
      <li class="active">{{ "EXCHANGE.TITLE" | translate }}</li>
    </ol>
  </div>
</nav>

<main class="container-fluid">
  <div class="row">
    <div class="col-md-6">
      <table class="table table-bordered table-condensed">
        <thead>
          <tr>
            <th colspan="3">{{ "EXCHANGE.ENTERPRISE_CURRENCY" | translate }} {{ ExchangeCtrl.enterpriseCurrency }}</th>
          </tr>
          <tr>
            <th>{{ "COLUMNS.DATE" | translate }}</th>
            <th>{{ "COLUMNS.CURRENCY" | translate }}</th>
            <th>{{ "COLUMNS.RATE" | translate }}</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="rate in ExchangeCtrl.rates.data | orderBy:'-date' | limitTo:12">
            <td>{{ rate.date | date }}</td>
            <td>{{ rate.foreign_currency_id }}</td>
            <td>{{ rate.rate | currency:rate.foreign_currency_id }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="col-md-6">

      <div class="panel panel-default">
        <div class="panel-heading">
          {{ "EXCHANGE.CURRENCY_EXCHANGE_RATES" | translate }}
        </div>
        <div class="panel-body">
          <div class="form-group" ng-repeat="rate in ExchangeCtrl.currentRates">
            <label class="control-label col-md-4">
              {{ ExchangeCtrl.currency.get(rate.foreign_currency_id).name }} Rate
            </label>
            <div class="col-md-4">
              <p class="form-control-static">{{ 100 | currency:rate.enterprise_currency_id }}</p>
            </div>
            <div class="col-md-4">
              <p class="form-control-static">{{ rate.rate * 100 | currency:rate.foreign_currency_id }}</p>
            </div>
          </div>
        </div>
      </div>

      <div class="panel panel-default">
        <div class="panel-body">

          <form name="RateForm" novalidate ng-submit="ExchangeCtrl.submit(RateForm.$invalid)">
            <fieldset>
              <legend>{{ "EXCHANGE.SET" | translate }}</legend>

              <div class="form-group">
                <div class="checkbox">
                  <label>
                    <input name="previous" type="checkbox" ng-model="ExchangeCtrl.form.previous">
                    {{ "EXCHANGE.OLD_DATE" | translate}}
                  </label>
                </div>
              </div>

              <div class="form-group" >
                <input name="date" type="date" class="form-control" ng-model="ExchangeCtrl.form.date" ng-disabled="!ExchangeCtrl.form.isOld" ng-max="{{ ExchangeCtrl.tomorrow }}" max="{{ ExchangeCtrl.today | date:'yyyy-MM-dd' }}">
              </div>

              <div class="form-group">
                <div class="col-md-5">
                  <p class="form-control-static">
                    {{  }}
                  </p>
                </div>

                <div class="col-sm-offset-1 col-md-5">
                  <select name="currency" class="form-control" ng-model="ExchangeCtrl.form.foreign_currency_id" ng-options="c.id as c.name for c in ExchangeCtrl.currency.data | filter:ExchangeCtrl.fcurrency track by c.id" required>
                    <option value="" disabled> {{ "SELECT.CURRENCY" | translate }} </option>
                  </select>
                </div>
              </div>

              <div class="form-group">
                <div class="input-group">
                  <input class="form-control" value="100" readonly>
                  <span class="input-group-addon">
                    {{ ExchangeCtrl.currency.get(ExchangeCtrl.enterprise.currency_id).symbol }}
                  </span>
                </div>
                <label class="control-label">
                  <i class="glyphicon glyphicon-arrow-right"></i>
                </label>
                <div class="col-md-5 input-group">
                  <input class="form-control" name="rate" type="number" ng-model="ExchangeCtrl.form.rate" min="0" required>
                    <span class="input-group-addon">
                      {{ ExchangeCtrl.currency.get(ExchangeCtrl.form.foreign_currency_id).symbol }}
                    </span>
                </div>
              </div>
            </fieldset>

            <button type="submit" class="btn btn-default">
              {{ 'FORM.SUBMIT' | translate }}
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
</main>
