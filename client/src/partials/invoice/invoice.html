<header>
  {{'INVOICE.TITLE' | translate}}
  <!-- FIXME hacks for meeting -->
  <div ng-if="origin==='sale'" class="pull-right">
    <select class="form-bhima" ng-change="updateCost(session.currentCurrency.id)" ng-model="session.currentCurrency" ng-options="currency.symbol for currency in model.currency.data"></select>
  </div>
</header>

<!-- TODO Massive style hack -->
<div class="reportBody" style="margin-top: 50px;">
  <div class="reportFrame">
    <div ng-switch="origin">

      <div ng-switch-when="sale">
        <!-- Patient Invoice template -->
        <div class="row customer-details">
          <div class="col-xs-12">

            <small style="float: right; color: grey; font-size: 8px">{{ invoice.uuid }}</small>
            <h4 class="invoice-header">{{ 'INVOICE.PATIENT_INVOICE' | translate }}</h4>
          </div>
        </div>
        <div class="row customer-details">
          <!-- Temporary style; needs official markup and CSS -->
          <div class="col-xs-4">
            <span>
              <b>{{project.enterprise_name}}</b>
            </span>
            <br>
            {{project.village}}
            <br>
            <!-- hah -->
            {{ project.postal || 'B.P. 205'}}
            <br>
            {{project.sector}}
            <br>
            <i>TEL</i> {{project.phone}}
            <br>
            <i>FAX</i> {{project.email}}

          </div>
          <div class="col-xs-4">
            <b>{{recipient.first_name}} {{recipient.last_name}}</b>
            <br>
            <!-- Debtor group name -->
            {{recipient.name}}
            <br>
            <br>
            <i>{{ 'INVOICE.DATE_REGISTRATION' | translate }}</i>
            <br>
            {{recipient.registration_date | date}}
          </div>
          <div class="col-xs-4">
            <i>{{'INVOICE.INVOICE_ID' | translate}}</i> <b>{{invoice.hr_id}}</b>
            <br>
            <i>{{'INVOICE.CLIENT_ID' | translate}}</i> <b>{{recipient.hr_id}}</b>
            <br>
            <br>
            <i>{{ 'INVOICE.DATE_RECEIPT' | translate }}</i>
            <br>
            {{invoice.invoice_date | date}}
            <br>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-12">

            <table class="invoiceTable">
              <thead>
                <tr>
                  <th>{{'COLUMNS.CODE' | translate}}</th>
                  <th>{{'INVOICE.DESCRIPTION' | translate}}</th>
                  <th>{{'COLUMNS.QUANTITY' | translate}}</th>
                  <th>{{'INVOICE.TRANSACTION_PRICE' | translate}}</th>
                  <th>{{'INVOICE.AMOUNT' | translate}}</th>
                </tr>
              </thead>
              <tbody class="items">
                <tr ng-repeat="item in model['invoiceItem'].data | orderBy : 'code'">
                  <td>{{ item.code }}</td>
                  <td>{{ item.text }}</td>
                  <td>{{ item.quantity }}</td>

                  <td><span ng-bind-html="item.localeTransaction | intlcurrency:session.currentCurrency.id"></span></td>
                  <td><span ng-bind-html="item.localeCost | intlcurrency:session.currentCurrency.id"></span></td>
                </tr>
              </tbody>
              <tbody class="totals">
                <tr><td colspan="4" class="no-border">{{'INVOICE.TOTAL' | translate}}</td><td><span ng-bind-html="invoice.localeCost | intlcurrency:session.currentCurrency.id"></span></td></tr>
                <tr><td colspan="4" class="no-border">{{'INVOICE.AMOUNT_RECEIVED' | translate}}</td><td><span ng-bind-html="invoice.ledger.localeCredit | intlcurrency:session.currentCurrency.id"></span></td></tr>
                <tr><td colspan="4" class="no-border">{{'INVOICE.BALANCE_DUE' | translate}}</td><td><span ng-bind-html="invoice.localeBalance | intlcurrency:session.currentCurrency.id"></span></td></tr>
              </tbody>

            </table>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-6">
            <div class="pull-right">
              <b>{{"INVOICE.SIGN_HEADER_BILLING" | translate}}</b>
            </div>
          </div>
          <div class="col-xs-6">
            <div class="pull-left">
             <b>{{"INVOICE.SIGN_CLIENT" | translate}}</b>
            </div>
          </div>
        </div> <!-- End Patient Invoice template -->
      </div>

      <div ng-switch-when="consumption">
        <!-- Patient Invoice template -->
        <div class="row customer-details">
          <div class="col-xs-12">

            <small style="float: right; color: grey; font-size: 8px">{{ invoice.uuid }}</small>
            <h4 class="invoice-header">{{ 'INVOICE.PROOF_OF_PATIENT_CONSUMPTION' | translate }}</h4>
          </div>
        </div>
        <div class="row customer-details">
          <!-- Temporary style; needs official markup and CSS -->
          <div class="col-xs-4">
            <span>
              <b>{{project.enterprise_name}}</b>
            </span>
            <br>
            {{project.village}}
            <br>
            <!-- hah -->
            {{ project.postal || 'B.P. 205'}}
            <br>
            {{project.sector}}
            <br>
            <i>TEL</i> {{project.phone}}
            <br>
            <i>FAX</i> {{project.email}}

          </div>
          <div class="col-xs-4">
            <b>{{recipient.first_name}} {{recipient.last_name}}</b>
            <br>
            <!-- Debtor group name -->
            {{recipient.name}}
            <br>
            <br>
            <i>{{ 'INVOICE.DATE_REGISTRATION' | translate }}</i>
            <br>
            {{recipient.registration_date | date}}
          </div>
          <div class="col-xs-4">
            <i>{{'INVOICE.DOCUMENT_REF' | translate}}</i> <b>{{invoice.hr_id}}</b>
            <br>
            <i>{{'INVOICE.CLIENT_ID' | translate}}</i> <b>{{recipient.hr_id}}</b>
            <br>
            <i>{{'INVOICE.DEPOT_REF' | translate}}</i> <b>{{depot.reference}}</b>
            <br>
            <i>{{ 'INVOICE.DATE_RECEIPT' | translate }}</i>
            <br>
            {{invoice.invoice_date | date}}
            <br>
          </div>

        </div>
        <div class="row">
          <div class="col-xs-12">

            <table class="invoiceTable">
              <thead>
                <tr>
                  <th>{{'COLUMNS.DESCRIPTION' | translate}}</th>
                  <th>{{'COLUMNS.CODE' | translate}}</th>
                  <th>{{'COLUMNS.DEPOT' | translate}}</th>
                  <th>{{'COLUMNS.LOT_NUMBER' | translate}}</th>
                  <th>{{'COLUMNS.QUANTITY' | translate}}</th>
                </tr>
              </thead>
              <tbody class="items">
                <tr ng-repeat="item in consumption.data | orderBy : 'code'">
                  <td>'{{ item.text }}'</td>
                  <td>{{ item.code }}</td>
                  <td>[{{depot.reference}}] {{ depot.text }}</td>
                  <td>{{ item.lot_number }}</td>
                  <td>{{ item.quantity }}</td>

                  <!-- <td><span ng&#45;bind&#45;html="item.localeTransaction | intlcurrency:session.currentCurrency.id"></span></td> -->
                  <!-- <td><span ng&#45;bind&#45;html="item.localeCost | intlcurrency:session.currentCurrency.id"></span></td> -->
                </tr>
              </tbody>
            </table>

          <div class="signatures">
            <h5>{{ "UTIL.SIGNATURES" | translate }}</h5>

            <div class="signature-box">
              <label>{{ "SIGNATURES.CUSTOMER" | translate }}</label> <label style="float: right;">{{ "UTIL.DATE" | translate }}</label>
              <div class="signature-line"></div>
            </div>

          </div>

          </div>


        </div> <!-- End Patient Invoice template -->
      </div>

      <div ng-switch-when="movement">
        <!-- Patient Invoice template -->
        <div class="row customer-details">
          <div class="col-xs-12">

            <small style="float: right; color: grey; font-size: 8px">{{ invoiceId }}</small>
            <h4 class="invoice-header">{{ 'INVOICE.STOCK_MOVEMENT' | translate }}</h4>
          </div>
        </div>

        <div class="row customer-details">
          <div class="col-xs-6">
            <table class="invoiceTable">
              <thead>
                <tr>
                  <th colspan="2">Origin Depot</th>
                </tr>
              </thead>
              <tbody ng-if="depotEntry" class="items">
                <tr>
                  <td>Name</td><td>{{depotEntry.text}}</td>
                </tr>

                <tr>
                  <td>Reference</td><td>{{depotEntry.reference}}</td>
                </tr>

                <tr>
                  <td>Transfer Date</td><td>{{movement.data[0].date | date}}</td>
                </tr>

              </tbody>
              <tbody ng-if="depotEntry===undefined" class="items">
                <tr>
                  <td colspan="2">[Initial stock entry]</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="col-xs-6">
            <table class="invoiceTable">
              <thead>
                <tr>
                  <th colspan="2">Destination Depot</th>
                </tr>
              </thead>
              <tbody ng-if="depotEntry" class="items">
                <tr>
                  <td>Name</td><td>{{depotExit.text}}</td>
                </tr>

                <tr>
                  <td>Reference</td><td>{{depotExit.reference}}</td>
                </tr>
                <tr>
                  <td>Transfer Date</td><td>{{movement.data[0].date | date}}</td>
                </tr>

              </tbody>
              <tbody ng-if="depotEntry===undefined" class="items">
                <tr>
                  <td colspan="2">[...]</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Lots -->
        <div class="row" ng-repeat="item in movement.data" style="margin-bottom: 10px">
          <div class="col-xs-12">

            <table class="invoiceTable">
              <thead>
                <tr>
                  <th colspan="2">Lot {{item.lot_number}}</th>
                </tr>
              </thead>
              <tbody class="items">
                <tr>
                  <td>Item</td><td>{{item.text}} <i>({{item.code}})</i></td>
                </tr>
                <tr>
                  <td>Expiration Date</td><td>{{item.expiration_date | date}}</td>
                </tr>
                <tr>
                  <td>Quantity Transfered</td><td><b>{{item.quantity}}</b></td>
                </tr>
                <tr>
                  <td>Tracking Number</td><td><small>{{item.tracking_number}}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div> <!-- End Patient Invoice template -->
      </div>

      <div ng-switch-when="purchase">
        <!-- Patient Invoice template -->
        <div class="row customer-details">
          <div class="col-xs-12">

            <small style="float: right; color: grey; font-size: 8px">{{ purchase.uuid }}</small>
            <h4 class="invoice-header">{{ 'INVOICE.PURCHASE_ORDER' | translate }}</h4>
          </div>
        </div>
        <div class="row customer-details">
          <!-- Temporary style; needs official markup and CSS -->
          <div class="col-xs-4">
            <span>
              <b>{{project.enterprise_name}}</b>
            </span>
            <br>
            {{project.village}}
            <br>
            <!-- hah -->
            {{ project.postal || 'B.P. 205'}}
            <br>
            {{project.sector}}
            <br>
            <i>TEL</i> {{project.phone}}
            <br>
            <i>FAX</i> {{project.email}}

          </div>
          <div class="col-xs-4">
            <i>{{ "INVOICE.PURCHASE_RECIPIENT" | translate }}</i>
            <br>
            <span>
              <b>{{supplier.name}}</b>
            </span>
            <br>
            {{supplierLocation.village}}
            <!-- hah -->
            <!-- {{ project.postal || 'B.P. 205'}} -->
            <br>
            {{supplierLocation.sector}}
            <br>
            <i>TEL</i> {{supplier.phone}}
            <br>
            <i>FAX</i> {{supplier.email}}

          </div>
          <div class="col-xs-4">
            <i>{{'INVOICE.PURCHASE_ID' | translate}}</i> <b>{{purchase.reference}}</b>
            <br>
            <i>{{ 'INVOICE.PURCHASE_DATE' | translate }}</i> <b>{{purchase.purchase_date | date}}</b>
            <br>
            <i>{{ 'INVOICE.DATE_RECEIPT' | translate}}</i> <b>{{timestamp | date}}</b>
            <br>
            {{ 'INVOICE.EMPLOYEE_CONTACT' | translate }}</i>
            <br>
            <b>{{employee.name}}</b>

            <br>
            {{ 'INVOICE.EMPLOYEE_CODE' | translate }}</i> <b>{{employee.code}}</b>
          </div>

        </div>
        <div class="row">
          <div class="col-xs-12">

            <table class="invoiceTable">
              <thead>
                <tr>
                  <th>{{'COLUMNS.BHIMA_STOCK_CODE' | translate}}</th>
                  <th>{{'INVOICE.DESCRIPTION' | translate}}</th>
                  <th>{{'COLUMNS.QUANTITY' | translate}}</th>
                  <th>{{'COLUMNS.PURCHASE_PRICE' | translate}}</th>
                  <th>{{'INVOICE.AMOUNT' | translate}}</th>
                </tr>
              </thead>
              <tbody class="items">
                <tr ng-repeat="item in model.purchaseItem.data | orderBy : 'code'">
                  <td>{{ item.code }}</td>
                  <td>{{ item.text }}</td>
                  <td>{{ item.quantity }}</td>

                  <td><span ng-bind-html="item.unit_price | intlcurrency:session.currentCurrency.id"></span></td>
                  <td><span ng-bind-html="item.total | intlcurrency:session.currentCurrency.id"></span></td>
                </tr>
              </tbody>
              <tbody class="totals">
                <tr><td colspan="4" class="no-border">{{'INVOICE.PURCHASE_TOTAL' | translate}}</td><td><span ng-bind-html="purchase.cost | intlcurrency:session.currentCurrency.id"></span></td></tr>
                <!-- <tr><td colspan="4" class="no&#45;border">{{'INVOICE.AMOUNT_RECEIVED' | translate}}</td><td><span ng&#45;bind&#45;html="invoice.ledger.localeCredit | intlcurrency:session.currentCurrency.id"></span></td></tr> -->
                <!-- <tr><td colspan="4" class="no&#45;border">{{'INVOICE.BALANCE_DUE' | translate}}</td><td><span ng&#45;bind&#45;html="invoice.localeBalance | intlcurrency:session.currentCurrency.id"></span></td></tr> -->
              </tbody>

            </table>
          </div>
        </div> <!-- End Patient Invoice template -->
      </div>

      <div ng-switch-when="patient">
        <div class="row customer-details">
          <div class="col-xs-12">
            <h4 class="invoice-header">{{'INVOICE.PATIENT' | translate}}</h4>
          </div>
        </div>
        <div class="row customer-details">
          <div class="col-xs-12">
            <div class="col-xs-1">
            </div>
            <div class="col-xs-7">

              <div class="row">
                <h4>{{recipient.first_name}} {{recipient.last_name}}</h4>
              </div>
              <div class="row">
                <i>{{location.village}}</i>
                <br>
                <i>{{location.sector}}</i>
                <br>
                <i>{{location.province}}</i>
              </div>
            </div>
            <div style="text-align: left;" class="col-xs-4">
              <div class="row">
                <b>{{'INVOICE.PATIENT_ID' | translate}}</b>
              </div>
              <div class="row">
                {{recipient.hr_id}}
              </div>
              <div class="row">
                <b>{{'INVOICE.DATE_REGISTRATION' | translate}}</b>
              </div>
              <div class="row">
                {{recipient.registration_date | date}}
              </div>

              <div class="row">
                <b>Date of receipt</b>
              </div>
              <div class="row">
                {{timestamp | date}}
              </div>

            </div>
          </div>
        </div>
      </div>

      <div ng-switch-when="credit">
        <div class="row customer-details">
          <div class="col-xs-12">
            <h4 class="invoice-header">{{'INVOICE.CREDIT_NOTE' | translate}}</h4>
          </div>
        </div>
        <div class="row customer-details">
          <div class="col-xs-1">
            <b>{{'INVOICE.TO' | translate}}</b>
          </div>
          <div class="col-xs-7">
            <div class="row">
              {{note.first_name}} {{note.last_name}}
            </div>
            <div class="row">
              <i>{{location.village}}</i>
              <br>
              <i>{{location.sector}}</i>
              <br>
              <i>{{location.province}}</i>
            </div>
          </div>
          <div style="text-align: left;" class="col-xs-4">
            <div class="row">
              <b>{{'INVOICE.NOTE_ID' | translate}}</b>
            </div>
            <div class="row">
              {{note.abbr}}{{note.reference}}
            </div>
            <div class="row">
              <b>{{'INVOICE.DATE' | translate}}</b>
            </div>
            <div class="row">
              {{note.note_date | date}}
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-12">
            <table class="invoiceTable">
              <thead>
                <tr><th>{{'INVOICE.NOTE' | translate}}</th><th>{{ 'COLUMNS.DEBITOR' | translate }}<th>{{'INVOICE.AMOUNT' | translate}}</th></tr>
              </thead>
              <tbody class="items">
                <tr><td>{{note.description}}</td><td>{{note.first_name}} {{note.last_name}}</td><td>{{note.cost | currency}}</td></tr>
              </tbody>
              <tbody class="totals">
                <tr><td colspan="2" class="no-border">{{'INVOICE.TOTAL_CREDITED' | translate}}</td><td>{{note.cost | currency}}</td></tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-6">
            <div class="pull-right">
              <b>{{"INVOICE.SIGN_HEADER_BILLING" | translate}}</b>
            </div>
          </div>
        </div> <!-- End Patient Invoice template -->
      </div>
      <!-- Placholder debtor recipt, shows all transactions for given debtor, and the balance owed-->
      <div ng-switch-when="debtor">
        <div class="row customer-details">
          <div class="col-xs-12">
            <h4 class="invoice-header">{{'INVOICE.PATIENT' | translate}}</h4>
          </div>
          <div class="col-xs-12">
            <h4 class="invoice-header"></h4>
          </div>
        </div>
        <div class="row">
          <!-- Patient Address -->
          <div class="col-xs-8">
            {{'INVOICE.ADDRESS' | translate}}
          </div>
          <!-- Patient ID, Phone -->
          <div class="col-xs-4">
            <div class="row">
              {{'INVOICE.ID' | translate}}
            </div>
            <div class="row">
              {{'INVOICE.PHONE' | translate}}
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-xs-12">
            <table class="invoiceTable">
              <thead>
                <tr><th>{{'INVOICE.DATE' | translate}}</th><th>{{'INVOICE.DESCRIPTION' | translate}}</th><th>{{'INVOICE.AMOUNT' | translate}}</th><th>{{'INVOICE.BALANCE_DUE' | translate}}</th></tr>
              </thead>
            </table>
          </div>
        </div>

        <div class="row">
          <div class="col-xs-12">
            {{'INVOICE.BALANCE_DUE' | translate}}
          </div>
        </div>
      </div>

      <div ng-switch-when="cash">
        <!-- Cash receipt template -->
        <div class="row customer-details">
          <div class="col-xs-12">
            <h4 class="invoice-header">{{'INVOICE.CASH_RECEIPT' | translate}}</h4>
            <small class="pull-right" style="color: grey; font-size: 8px">{{ cashTransaction.cash_uuid }}</small>
          </div>
        </div>
        <div class="row customer-details">
          <div class="col-xs-1">
            <b>{{'INVOICE.TO' | translate}}</b>
          </div>
          <div class="col-xs-7">
            <div class="row">
              {{recipient.first_name}} {{recipient.last_name}}
            </div>
            <div class="row">
              <i>{{recipient.location.village}}</i>
              <br>
              <i>{{recipient.location.sector}}</i>
              <br>
              <i>{{recipient.location.province}}</i>
            </div>
          </div>
          <div style="text-align: left;" class="col-xs-4">
          <div class="row">
            <b>{{'INVOICE.CASH_ID' | translate}}</b>
          </div>
          <div class="row">
            {{ recipient.abbr + cashTransaction.reference }}
          </div>
            <div class="row">
              <b>{{'INVOICE.DATE' | translate}}</b>
            </div>
            <div class="row">
              {{ cashTransaction.date | date}}
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-12">
            <table class="invoiceTable">
              <thead>
                <tr>
                  <th>{{'INVOICE.DESCRIPTION' | translate}}</th>
                  <th>{{'INVOICE.AMOUNT' | translate}}</th>
                </tr>
              </thead>
              <tbody class="items">
                <tr ng-repeat-start="invoice in model.cash.data"><td colspan="2"><b>{{'INVOICE.INVOICE_ID' | translate}} {{ project.abbr + invoice.reference }}</b></td></tr>
                <tr ng-repeat-end ng-repeat="item in model['invoiceItem'].data | orderBy: 'code' | filter:{ sale_uuid: invoice.invoice_uuid}"><td>{{item.text}}</td><td><span ng-bind-html="item.localeCost | intlcurrency:cashTransaction.currency_id"></span></td></tr>
              </tbody>
              <tbody class="totals">
              <tr><td class="no-border">{{'INVOICE.TOTAL' | translate }}</td><td><span ng-bind-html="invoice.localeCost | intlcurrency:cashTransaction.currency_id"></span></td></tr>
                <tr><td class="no-border">{{'INVOICE.AMOUNT_RECEIVED' | translate }}</td><td><span ng-bind-html="cashTransaction.cost  | intlcurrency:cashTransaction.currency_id"></span></td></tr>
                <tr><td class="no-border">{{'INVOICE.BALANCE_DUE' | translate }}</td><td><span ng-bind-html="invoice.localeBalance | intlcurrency:cashTransaction.currency_id"</span></td></tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-6">
            <div class="pull-right">
              <b>{{"INVOICE.SIGN_HEADER_AUXI" | translate}}</b>
            </div>
          </div>
          <div class="col-xs-6">
            <div class="pull-left">
             <b>{{"INVOICE.SIGN_CLIENT" | translate}}</b>
            </div>
          </div>
        </div>
      </div>

      <div ng-switch-when="caution">
        <div class="row customer-details">
          <div class="col-xs-12">
            <h4 class="invoice-header">{{'INVOICE.CAUTION' | translate}}</h4>
          </div>
        </div>
        <div class="row customer-details">
          <div class="col-xs-1">
            <b>{{'INVOICE.TO' | translate}}</b>
          </div>
          <div class="col-xs-7">
            <div class="row">
              {{caution.first_name}} {{caution.last_name}}
            </div>
            <div class="row">
              <i>{{location.village}}</i>
              <br>
              <i>{{location.sector}}</i>
              <br>
              <i>{{location.province}}</i>
            </div>
          </div>
          <div style="text-align: left;" class="col-xs-4">
            <div class="row">
              <b>{{'INVOICE.CAUTION_ID' | translate}}</b>
            </div>
            <div class="row">
              {{caution.id}}
            </div>
            <div class="row">
              <b>{{'INVOICE.DATE' | translate}}</b>
            </div>
            <div class="row">
              {{caution.date | date}}
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-12">
            <table class="invoiceTable">
              <thead>
                <tr><th>{{'INVOICE.CAUTION' | translate}}</th>
                  <th>{{'INVOICE.AMOUNT' | translate}}</th></tr>
              </thead>
              <tbody class="items">
                <tr>
                  <td>{{'INVOICE.LIBELLE_CAUTION' | translate}}</td>
                  <td>{{convert(caution.value, caution.currency_id) | currency}}</td>
                </tr>
              </tbody>
              <tbody class="totals">
                <tr><td colspan="1" class="no-border">{{'INVOICE.TOTAL_CAUTION' | translate}}</td><td>{{convert(caution.value, caution.currency_id) | currency}}</td></tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-6">
            <div class="pull-right">
              <b>{{"INVOICE.SIGN_HEADER_AUXI" | translate}}</b>
            </div>
          </div>
          <div class="col-xs-6">
            <div class="pull-left">
             <b>{{"INVOICE.SIGN_CLIENT" | translate}}</b>
            </div>
          </div>
        </div>
      </div>
      <div ng-switch-when="pcash_transfert">
        <div class="row customer-details">
          <div class="col-xs-12">
            <h4 class="invoice-header">{{'INVOICE.TRANSFERT' | translate}}</h4>
          </div>
        </div>
        <div class="row customer-details">
          <div class="col-xs-2">
            <b>{{'INVOICE.BY' | translate}}</b>
          </div>
          <div class="col-xs-6">
            <div class="row">
              <b>{{transfert.first}} {{transfert.last}}</b>
            </div>
          </div>
          <div style="text-align: left;" class="col-xs-4">
            <div class="row">
              <b>{{'INVOICE.DATE' | translate}}</b>
            </div>
            <div class="row">
              {{transfert.date | date}}
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-12">
            <table class="invoiceTable">
              <thead>
                <tr><th>{{'INVOICE.DESIGNATION' | translate}}</th>
                <th>{{'INVOICE.AMOUNT' | translate}}</th></tr>
              </thead>
              <tbody class="items">
                <tr>
                  <td>{{'INVOICE.LIBELLE_TRANSFERT_FROM' | translate}}{{transfert.account_txt}} {{'INVOICE.TO' | translate}} {{'INVOICE.PCASH' | translate}}</td>
                  <td><span ng-bind-html="transfert.cost  | intlcurrency:transfert.currency_id"></span></td>
                </tr>
              </tbody>
              <tbody class="totals">
                <tr><td colspan="1" class="no-border">{{'INVOICE.TOTAL_TRANSFERT' | translate}}</td><td><span ng-bind-html="transfert.cost  | intlcurrency:transfert.currency_id"></span></td></tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-6">
            <div class="pull-right">
              <b>{{"INVOICE.SIGN_HEADER_PRI" | translate}}</b>
            </div>
          </div>
          <div class="col-xs-6">
            <div class="pull-left">
             <b>{{"INVOICE.SIGN_HEADER_AUXI" | translate}}</b>
            </div>
          </div>
        </div><!-- End Patient Invoice template -->
      </div>

      <div ng-switch-when="pcash_convention">
        <div class="row customer-details">
          <div class="col-xs-12">
            <h4 class="invoice-header">{{'INVOICE.CONVENTION' | translate}}</h4>
          </div>
        </div>
        <div class="row customer-details">
          <!-- Temporary style; needs official markup and CSS -->
          <div class="col-xs-4">
            <span>
              <b>{{conventions[0].name}}</b>
            </span>
            <br>
            {{conventions[0].abbr}}
            <br>
            <!-- hah -->
            {{ conventions[0].postal || 'B.P. 205'}}
            <br>
            {{location.sector}}
            <br>
            <i>TEL</i> {{conventions[0].phone}}
            <br>
            <i>FAX</i> {{conventions[0].email}}

          </div>
          <div class="col-xs-4">
            <b>{{conventions[0].account_txt}}</b>
            <br>
            <br>
            <i>{{ 'INVOICE.DATE_REGISTRATION' | translate }}</i>
            <br>
            {{conventions[0].date | date}}
          </div>
          <div class="col-xs-4">
            <i>{{'INVOICE.INVOICE_ID' | translate}}</i> <b>{{conventions[0].reference}}</b>
            <br>
            <br>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-12">
            <table class="invoiceTable">
              <thead>
                <tr><th>{{'INVOICE.NUM_CONVENTION_PAY' | translate}}</th>
                <th>{{'INVOICE.DESIGNATION' | translate}}</th>
                <th>{{'INVOICE.AMOUNT' | translate}}</th></tr>
              </thead>
              <tbody class="items">
                <tr ng-repeat="conv in conventions">
                  <td>{{conv.reference}}</td>
                  <td>{{conv.note}}</td>
                  <td><span ng-bind-html="conv.debit  | intlcurrency:conv.currency_id"></span></td>
                </tr>
              </tbody>
              <tbody class="totals">
                <tr><td colspan="2" class="no-border">{{'INVOICE.TOTAL' | translate}}</td><td><span ng-bind-html="conventions[0].cost  | intlcurrency:conventions[0].currency_id"></span></td></tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-6">
            <div class="pull-right">
              <b>{{"INVOICE.SIGN_HEADER_PRI" | translate}}</b>
            </div>
          </div>
          <div class="col-xs-6">
            <div class="pull-left">
             <b>{{"INVOICE.SIGN_CLIENT" | translate}}</b>
            </div>
          </div>
        </div>
      </div>

      <div ng-switch-when="indirect_purchase">
        <div class="row customer-details">
          <div class="col-xs-12">
            <small style="float: right; color: grey; font-size: 8px">{{ invoice.uuid }}</small>
            <h4 class="invoice-header">{{ 'INVOICE.INDIRECT_PURCHASE' | translate }}</h4>
          </div>
        </div>
        <div class="row customer-details">
          <!-- Temporary style; needs official markup and CSS -->
          <div class="col-xs-4">
            <span>
              <b>{{invoice.enterprise_name}}</b>
            </span>
            <br>
            {{invoice.village}}
            <br>
            <!-- hah -->
            {{ invoice.postal || 'B.P. 205'}}
            <br>
            {{invoice.sector}}
            <br>
            <i>TEL</i> {{invoice.phone}}
            <br>
            <i>FAX</i> {{invoice.email}}
          </div>

          <div class="col-xs-4">
            <b>{{invoice.name}} </b>
            <br>
            <i>{{ 'INVOICE.DATE_REGISTRATION' | translate }}</i>
            <br>
            {{invoice.purchase_date | date}}
          </div>

          <div class="col-xs-4">
            <i>{{'INVOICE.INVOICE_ID' | translate}}</i> <b>{{invoice.reference}}</b>
            <br>
            <i>{{'INVOICE.EMPLOYEE_CODE' | translate}}</i> <b>{{invoice.employee_code}}</b>
            <br>
            <br>
            <i>{{ 'INVOICE.DATE_RECEIPT' | translate }}</i>
            <br>
            {{invoice.purchase_date | date}}
            <br>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-12">
            <table class="invoiceTable">
              <thead>
                <tr>
                  <th>{{'COLUMNS.REFERENCE_PURCHASE' | translate}}</th>
                  <th>{{'INVOICE.COST' | translate}}</th>
                  <th>{{'COLUMNS.GIVEN_AMOUNT' | translate}}</th>
                  <th>{{'INVOICE.RECEIVED_BY' | translate}}</th>
                </tr>
              </thead>
              <tbody class="items">
                <tr>
                  <td>{{ invoice.reference }}</td>
                  <td>{{ invoice.cost | currency }}</td>
                  <td>{{ invoice.cost | currency }}</td>
                  <td>{{ invoice.name }}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-6">
            <div class="pull-right">
              <b>{{"INVOICE.SIGN_HEADER_PRI" | translate}}</b>
            </div>
          </div>
          <div class="col-xs-6">
            <div class="pull-left">
             <b>{{"INVOICE.SIGN_EMPLOYEE" | translate}}</b>
            </div>
          </div>
        </div>
      </div>

      <div ng-switch-when="confirm_purchase">
        <div class="row customer-details">
          <div class="col-xs-12">
            <small style="float: right; color: grey; font-size: 8px">{{ invoice.uuid }}</small>
            <h4 class="invoice-header">{{ 'INVOICE.CONFIRM_PURCHASE' | translate }}</h4>
          </div>
        </div>
        <div class="row customer-details">
          <!-- Temporary style; needs official markup and CSS -->
          <div class="col-xs-4">
            <span>
              <b>{{invoice.enterprise_name}}</b>
            </span>
            <br>
            {{invoice.village}}
            <br>
            <!-- hah -->
            {{ invoice.postal || 'B.P. 205'}}
            <br>
            {{invoice.sector}}
            <br>
            <i>TEL</i> {{invoice.phone}}
            <br>
            <i>FAX</i> {{invoice.email}}
          </div>

          <div class="col-xs-4">
            <b>{{invoice.name}} </b>
            <br>
            <i>{{ 'INVOICE.DATE_REGISTRATION' | translate }}</i>
            <br>
            {{invoice.purchase_date | date}}
          </div>

          <div class="col-xs-4">
            <i>{{'INVOICE.INVOICE_ID' | translate}}</i> <b>{{invoice.reference}}</b>
            <br>
            <i>{{'INVOICE.EMPLOYEE_CODE' | translate}}</i> <b>{{invoice.employee_code}}</b>
            <br>
            <br>
            <i>{{ 'INVOICE.DATE_RECEIPT' | translate }}</i>
            <br>
            {{invoice.purchase_date | date}}
            <br>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-12">
            <table class="invoiceTable">
              <thead>
                <tr>
                  <th>{{'COLUMNS.REFERENCE_PURCHASE' | translate}}</th>
                  <th>{{'INVOICE.COST' | translate}}</th>
                  <th>{{'COLUMNS.GIVEN_AMOUNT' | translate}}</th>
                  <th>{{'INVOICE.CONFIRMED_BY' | translate}}</th>
                </tr>
              </thead>
              <tbody class="items">
                <tr>
                  <td>{{ invoice.reference }}</td>
                  <td>{{ invoice.cost | currency }}</td>
                  <td>{{ invoice.cost | currency }}</td>
                  <td>{{ invoice.name }}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-6">
            <div class="pull-right">
              <b>{{"INVOICE.SIGN_HEADER_PRI" | translate}}</b>
            </div>
          </div>
          <div class="col-xs-6">
            <div class="pull-left">
             <b>{{"INVOICE.SIGN_EMPLOYEE" | translate}}</b>
            </div>
          </div>
        </div>
      </div>

      <div ng-switch-when="service_distribution">
        <div class="row customer-details">
          <div class="col-xs-12">
            <small style="float: right; color: grey; font-size: 8px">{{ invoice.uuid }}</small>
            <h4 class="invoice-header">{{ 'INVOICE.CONFIRM_PURCHASE' | translate }}</h4>
          </div>
        </div>
        <div class="row customer-details">
          <!-- Temporary style; needs official markup and CSS -->
          <div class="col-xs-4">
            <span>
              <b>{{invoice.enterprise_name}}</b>
            </span>
            <br>
            {{invoice.village}}
            <br>
            <!-- hah -->
            {{ invoice.postal || 'B.P. 205'}}
            <br>
            {{invoice.sector}}
            <br>
            <i>TEL</i> {{invoice.phone}}
            <br>
            <i>FAX</i> {{invoice.email}}
          </div>

          <div class="col-xs-4">
            <b>{{invoice.name}} </b>
            <br>
            <i>{{ 'INVOICE.DATE_REGISTRATION' | translate }}</i>
            <br>
            {{invoice.purchase_date | date}}
          </div>

          <div class="col-xs-4">
            <i>{{'INVOICE.INVOICE_ID' | translate}}</i> <b>{{invoice.reference}}</b>
            <br>
            <i>{{'INVOICE.EMPLOYEE_CODE' | translate}}</i> <b>{{invoice.employee_code}}</b>
            <br>
            <br>
            <i>{{ 'INVOICE.DATE_RECEIPT' | translate }}</i>
            <br>
            {{invoice.purchase_date | date}}
            <br>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-12">
            <table class="invoiceTable">
              <thead>
                <tr>
                  <th>{{'COLUMNS.REFERENCE_PURCHASE' | translate}}</th>
                  <th>{{'INVOICE.COST' | translate}}</th>
                  <th>{{'COLUMNS.GIVEN_AMOUNT' | translate}}</th>
                  <th>{{'INVOICE.CONFIRMED_BY' | translate}}</th>
                </tr>
              </thead>
              <tbody class="items">
                <tr>
                  <td>{{ invoice.reference }}</td>
                  <td>{{ invoice.cost | currency }}</td>
                  <td>{{ invoice.cost | currency }}</td>
                  <td>{{ invoice.name }}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-6">
            <div class="pull-right">
              <b>{{"INVOICE.SIGN_HEADER_PRI" | translate}}</b>
            </div>
          </div>
          <div class="col-xs-6">
            <div class="pull-left">
             <b>{{"INVOICE.SIGN_EMPLOYEE" | translate}}</b>
            </div>
          </div>
        </div>
      </div>


      <!-- end Cash receipt template  -->
    </div>
  </div>
</div>
