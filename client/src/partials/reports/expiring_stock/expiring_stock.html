<header>
  {{ "EXPIRING.TITLE" | translate }}
</header>

<section class="top-nav">
  <div class="pull-left">
    <span class="btn-group">
      <button class="btn btn-sm btn-default btn-sq" ng-class="{ 'active' : true }">
        {{ (session.selected | translate) || "..." }}
      </button>
      <button class="btn btn-sm btn-default dropdown-toggle btn-sq">
        <span class="caret" data-caret="&#9660;"></span>
      </button>
      <ul class="dropdown-menu menu-sq">
        <li ng-repeat="opt in options">
          <a href="" ng-click="search(opt)">{{ opt.label | translate }}</a>
        </li>
      </ul>
    </span>
  </div>

  <div>
    <div class="col-xs-2">
      <input class="form-bhima" type="date" ng-model="session.dateFrom" rows="20" ng-change="doSearching()">
    </div>
    <div class="col-xs-2">
      <input class="form-bhima" type="date" ng-model="session.dateTo" rows="20" ng-change="doSearching(1)">
    </div>
    <div class="col-xs-4 pull-right">
      <select class="form-bhima" ng-model="session.depot" ng-change="doSearching()">
        <option selected value="{{'*'}}">{{ 'EXPIRING.ALL_DEPOTS' | translate }}</option>
        <option ng-repeat="depot in model.depots.data" value="{{depots.uuid}}">{{ depot.text}}</option>
      </select>
    </div>
  </div>
</section>

<div class="report">
  <div class="reportBody">
    <div class="reportFrame" ng-switch="mode">

        <div ng-switch-default>
          <h4>{{ "ALLTRANSACTIONS.DEFAULT" | translate }}</small></h4>
          <table id="transactionsTable" class="reportTable">
            <thead>
              <tr>
                <th>{{ "COLUMNS.ID" | translate }}</th>
                <th>{{ "COLUMNS.TRANS_ID" | translate }}</th>
                <th>{{ "COLUMNS.TRANS_DATE" | translate }}</th>
                <th>{{ "COLUMNS.DEBIT" | translate }}</th>
                <th>{{ "COLUMNS.CREDIT" | translate }}</th>
                <th>{{ "COLUMNS.ACCOUNT_NUMBER" | translate }}</th>
                <th>{{ "COLUMNS.DESCRIPTION" | translate }}</th>
                <th>{{ "COLUMNS.COMMENT" | translate }}</th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat='record in records'>
                <td> {{ record.id }} </td>
                <td> {{ record.trans_id }} </td>
                <td> {{ record.trans_date | date }} </td>
                <td><span ng-bind-html="record.debit | intlcurrency:model.c"></span></td>
                <td><span ng-bind-html="record.credit | intlcurrency:model.c"></span></td>
                <td> {{ record.account_number }} </td>
                <td> {{ record.description}} </td>
                <td> {{ record.comment}} </td>
              </tr>
            </tbody>
            <tfoot>
              <tr>
                <th colspan="7">
                  {{ "COLUMNS.TOTAL" | translate }} : {{ records.length }} /
                  {{"COLUMNS.DEBIT" | translate}} : <span ng-bind-html="somDebit | intlcurrency:model.c"></span> /
                  {{"COLUMNS.CREDIT" | translate}} : <span ng-bind-html="somCredit | intlcurrency:model.c"></span>
                </th>
              </tr>
            </tfoot>
          </table>
        </div>

        <div ng-switch-when="selected">
          <h4>{{ "ALLTRANSACTIONS.SELECTED" | translate }} <small> {{model.account_number}}</small></h4>
          <table id="transactionsTable" class="reportTable">
            <thead>
              <tr>
                <th>{{ "COLUMNS.ID" | translate }}</th>
                <th>{{ "COLUMNS.TRANS_ID" | translate }}</th>
                <th>{{ "COLUMNS.TRANS_DATE" | translate }}</th>
                <th>{{ "COLUMNS.DEBIT" | translate }}</th>
                <th>{{ "COLUMNS.CREDIT" | translate }}</th>
                <th>{{ "COLUMNS.ACCOUNT_NUMBER" | translate }}</th>
                <th>{{ "COLUMNS.DESCRIPTION" | translate }}</th>
                <th>{{ "COLUMNS.COMMENT" | translate }}</th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat='record in records'>
                <td> {{ record.id }} </td>
                <td> {{ record.trans_id }} </td>
                <td> {{ record.trans_date | date }} </td>
                <td><span ng-bind-html="record.debit | intlcurrency:model.c"></span></td>
                <td><span ng-bind-html="record.credit | intlcurrency:model.c"></span></td>
                <td> {{ record.account_number }} </td>
                <td> {{ record.description}} </td>
                <td> {{ record.comment}} </td>
              </tr>
            </tbody>
            <tfoot>
              <tr>
                <th colspan="7">
                  {{ "COLUMNS.TOTAL" | translate }} : {{ records.length }} /
                  {{"COLUMNS.DEBIT" | translate}} : <span ng-bind-html="somDebit | intlcurrency:model.c"></span> /
                  {{"COLUMNS.CREDIT" | translate}} : <span ng-bind-html="somCredit | intlcurrency:model.c"></span>
                </th>
              </tr>
            </tfoot>
          </table>
        </div>

        <div ng-switch-when="all">
          <h4>{{ "ALLTRANSACTIONS.DEFAULT" | translate }}</small></h4>
          <table id="transactionsTable" class="reportTable">
            <thead>
              <tr>
                <th>{{ "COLUMNS.ID" | translate }}</th>
                <th>{{ "COLUMNS.TRANS_ID" | translate }}</th>
                <th>{{ "COLUMNS.TRANS_DATE" | translate }}</th>
                <th>{{ "COLUMNS.DEBIT" | translate }}</th>
                <th>{{ "COLUMNS.CREDIT" | translate }}</th>
                <th>{{ "COLUMNS.ACCOUNT_NUMBER" | translate }}</th>
                <th>{{ "COLUMNS.DESCRIPTION" | translate }}</th>
                <th>{{ "COLUMNS.COMMENT" | translate }}</th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat='record in records'>
                <td> {{ record.id }} </td>
                <td> {{ record.trans_id }} </td>
                <td> {{ record.trans_date | date }} </td>
                <td><span ng-bind-html="record.debit | intlcurrency:model.c"></span></td>
                <td><span ng-bind-html="record.credit | intlcurrency:model.c"></span></td>
                <td> {{ record.account_number }} </td>
                <td> {{ record.description}} </td>
                <td> {{ record.comment}} </td>
              </tr>
            </tbody>
            <tfoot>
              <tr>
                <th colspan="7">
                  {{ "COLUMNS.TOTAL" | translate }} : {{ records.length }} /
                  {{"COLUMNS.DEBIT" | translate}} : <span ng-bind-html="somDebit | intlcurrency:model.c"></span> /
                  {{"COLUMNS.CREDIT" | translate}} : <span ng-bind-html="somCredit | intlcurrency:model.c"></span>
                </th>
              </tr>
            </tfoot>
          </table>
        </div>
    </div>
  </div>
</div>

